<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard - Landbank CIMS</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  
  <!-- CSS style -->
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #385E38; 
      color: #fff;
      min-height: 100vh; 
      display: flex;
      flex-direction: column; 
      align-items: center; 
      padding: 1rem; 
      box-sizing: border-box; 
    }

    .container {
      margin-top: 32px;
      margin-bottom: 32px;
      background-color: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 10px; 
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3); 
      margin-bottom: 50px;
      border: 1px solid rgba(255, 255, 255, 0.2); 
    }

    .table {
      color: #fff;
      width: 100%; 
      margin-top: 20px;
    }

    .table th, .table td {
      vertical-align: middle;
      border-color: rgba(255, 255, 255, 0.3);
      padding: 0.75rem; 
    }

    .table-dark {
      background-color: rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      color: #fff;
      padding-bottom: 15px;
      border-bottom: 1.5px solid rgba(255, 255, 255, 0.5);
      flex-wrap: wrap;
    }

    .header h2 {
      color: #fff;
      font-weight: bold;
      flex-grow: 1;
      margin-bottom: 0; 
    }

    .header form {
      margin-left: auto; 
    }

    /*For Responsiveness*/
    @media (max-width: 767.98px) {
      .header {
        flex-direction: column; /* Stack on small screens */
        align-items: center;
      }
      .header h2 {
        text-align: center;
        margin-bottom: 15px; /* Add space below title when stacked */
      }
      .header form {
        margin-left: 0; /* Remove auto margin when stacked */
        width: 100%; /* Make logout button full width */
        text-align: center;
      }
    }

    /* Button styles */
    .btn-logout {
      background: linear-gradient(to right, #00B86B, #008f53);
      color: #fff;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      border: none;
      transition: all 0.3s ease;
    }

    .btn-logout:hover {
      background: linear-gradient(to right, #008f53, #00B86B);
      transform: translateY(-2px);
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.3);
    }

    .btn-action {
      margin-right: 5px;
      padding: 8px 15px;
      border-radius: 8px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      white-space: nowrap; /* Prevent button text from wrapping */
      min-width: 90px; /* Ensure buttons are wide enough for tapping */
    }

    .btn-action:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
    }

    .btn-view {
      background: linear-gradient(to right, #17a2b8, #138496);
      color: white;
    }

    .btn-view:hover {
      background: linear-gradient(to right, #138496, #17a2b8);
    }

    .btn-edit {
      background: linear-gradient(to right, #ffc107, #e0a800);
      color: #212529;
    }

    .btn-edit:hover {
      background: linear-gradient(to right, #e0a800, #ffc107);
      color: #212529;
    }

    .btn-danger {
      background: linear-gradient(to right, #dc3545, #c82333);
      color: white;
    }

    .btn-danger:hover {
      background: linear-gradient(to right, #c82333, #dc3545);
    }

    .text-center {
      color: #fff;
    }

    /* Search and Filter Form */
    .form-control, .form-select {
      background-color: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #fff;
      font-weight: 500;
    }
    
    .form-control::placeholder, .form-select option {
      color: rgba(255, 255, 255, 0.7);
    }

    .form-control:focus, .form-select:focus {
      background-color: rgba(255, 255, 255, 0.25);
      border-color: #90EE90;
      box-shadow: 0 0 0 0.25rem rgba(144, 238, 144, 0.25);
      color: #fff;
    }

    .input-group-text {
      background-color: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #fff;
    }

    .form-label { 
      color: #fff;
    }

    /* Shiny Button Effect */
    .shiny-btn {
      position: relative;
      overflow: hidden;
      color: #fff;
      border: none;
      outline: none;
      transition: background 0.3s, box-shadow 0.3s, transform 0.2s;
      box-shadow: 0 0 15px rgba(0,0,0,0.08);
    }

    .shiny-btn:before {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%; height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.5s;
      z-index: 1;
    }

    .shiny-btn:hover:before {
      left: 100%;
    }

    .shiny-btn:active {
      transform: translateY(1px);
    }

    .btn-primary.shiny-btn {
      background: linear-gradient(90deg, #00B86B 0%, #008f53 100%);
    }
    .btn-secondary.shiny-btn {
      background: linear-gradient(90deg, #6c757d 0%, #495057 100%);
    }
    .btn-danger.shiny-btn {
      background: linear-gradient(90deg, #dc3545 0%, #b02a37 100%);
    }
    .btn-view.shiny-btn {
      background: linear-gradient(90deg, #17a2b8 0%, #138496 100%);
    }
    .btn-edit.shiny-btn {
      background: linear-gradient(90deg, #ffc107 0%, #e0a800 100%);
      color: #212529; /* Darker text for yellow buttons */
    }
    .btn-logout.shiny-btn {
      background: linear-gradient(90deg, #00B86B 0%, #008f53 100%);
    }

    /* Table responsiveness improvements */
    @media (max-width: 991.98px) { 
      .table thead {
        display: none; 
      }

      .table, .table tbody, .table tr, .table td {
        display: block; 
        width: 100%; 
      }

      .table tr {
        margin-bottom: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        background-color: rgba(255, 255, 255, 0.05); 
      }

      .table td {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        padding-left: 50%; 
        text-align: right;
      }

      .table td:before {
        content: attr(data-label); /* Use data-label for content */
        position: absolute;
        left: 10px;
        width: calc(50% - 20px); 
        padding-right: 10px;
        white-space: nowrap;
        text-align: left;
        font-weight: bold;
        color: rgba(255, 255, 255, 0.7);
      }

      .table td:last-child {
        border-bottom: 0;
      }

      /* Specific adjustments for action buttons */
      .table td:nth-last-child(1) { /* Target the Action column */
        text-align: center; /* Center the action buttons */
        padding-left: 10px; /* Reset padding */
      }

      .table td:nth-last-child(1):before {
        content: ''; /* Remove pseudo-element for action column */
        display: none;
      }

      .d-flex.justify-content-center.align-items-center.gap-1 {
        flex-wrap: wrap; /* Allow buttons to wrap */
        justify-content: center !important; /* Force center alignment */
        gap: 8px !important; /* Adjust gap for wrapped buttons */
        min-width: unset !important; /* Remove min-width from parent */
      }

      .btn-action {
        flex: 1 1 auto; /* Allow buttons to grow/shrink, distribute space */
        max-width: 100%; /* Ensure they don't overflow */
        margin: 0; 
      }
    }

    /* Form Modal Styles (from Add Customer Modal) */
    .modal-content {
      background-color: #385E38; 
      color: #fff; 
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
    }

    .modal-header {
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal-footer {
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal-title {
      color: #fff;
      font-weight: bold;
    }

    .btn-close {
      filter: invert(1); 
    }

    .modal-body .form-label {
      color: #fff; 
    }

    .modal-body .form-control,
    .modal-body .form-select {
      background-color: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.3);
      color: #fff;
    }
  </style>
  
 <!-- Main HTML Container -->
</head>
<body>
  <div class="container">
    <div class="header">
      <h2>Admin Dashboard</h2>
      <form action="/logout" method="POST">
        <button class="btn btn-logout">Logout</button>
      </form>
    </div>

    <h4>Registered Customers</h4>
    <table class="table table-bordered table-hover">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Customer No</th>
          <th>Full Name</th>
          <th>Email Address</th>
          <th>Contact No</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for customer in customers %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ customer.cust_no }}</td>
          <td>{{ customer.custname }}</td>
          <td>{{ customer.email_address }}</td>
          <td>{{ customer.contact_no }}</td>
          <td>
            <a href="{{ url_for('admin_view_customer', cust_no=customer.cust_no) }}" class="btn btn-view btn-sm btn-action">
                <i class="fas fa-eye"></i> View
            </a>
            <a href="{{ url_for('admin_edit_customer', cust_no=customer.cust_no) }}" class="btn btn-edit btn-sm btn-action">
                <i class="fas fa-edit"></i> Edit
            </a>
            <form action="{{ url_for('delete_customer') }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this customer?');" style="display:inline;">
              <input type="hidden" name="cust_no" value="{{ customer.cust_no }}">
              <button type="submit" class="btn btn-danger btn-sm btn-action">
                  <i class="fas fa-trash-alt"></i> Delete
              </button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="6" class="text-center">No customers found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
